---
import Layout from "../layouts/Layout.astro";
import Navigation from "../components/Navigation.astro";
import PostCard from "../components/PostCard.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);
---

<Layout title="dryrun">
  <header class="mb-20 flex items-center justify-between">
    <a href="/" class="text-3xl font-bold text-text hover:no-underline tracking-wide flex items-center gap-3 group">
      <svg class="w-7 h-7 text-accent translate-y-[0.1em]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <rect x="2" y="3" width="20" height="14" rx="2" />
        <line x1="6" y1="7" x2="14" y2="7" class="code-line-1" />
        <line x1="6" y1="10" x2="11" y2="10" class="code-line-2" />
        <line x1="6" y1="13" x2="16" y2="13" class="code-line-3" />
        <line x1="8" y1="21" x2="16" y2="21" />
        <line x1="12" y1="17" x2="12" y2="21" />
      </svg>
      <span class="logo-text">dryrun</span>
    </a>
    <Navigation />
  </header>

  <main>
    <section class="space-y-4">
      {
        posts.map((post) => (
          <PostCard
            title={post.data.title}
            description={post.data.description}
            date={post.data.date}
            slug={post.slug}
            tags={post.data.tags}
          />
        ))
      }
    </section>
  </main>
</Layout>
