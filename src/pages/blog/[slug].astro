---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
  const posts = await getCollection("blog");
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title} description={post.data.description}>
  <article class="max-w-none">
    <header class="mb-10">
      <h1
        class="text-3xl md:text-4xl font-black mb-6 uppercase tracking-tight inline-block px-4 py-2 bg-accent-cyan brutal-border brutal-shadow"
      >
        {post.data.title}
      </h1>
      <div class="mt-4">
        <time
          class="text-sm font-bold uppercase tracking-wider px-3 py-1 bg-accent-yellow brutal-border text-on-primary inline-block"
        >
          {
            post.data.date.toLocaleDateString("en-US", {
              year: "numeric",
              month: "long",
              day: "numeric",
            })
          }
        </time>
      </div>
    </header>

    <div
      class="prose-brutal
        [&_h2]:text-2xl [&_h2]:font-black [&_h2]:mt-10 [&_h2]:mb-4 [&_h2]:uppercase [&_h2]:tracking-tight [&_h2]:inline-block [&_h2]:px-3 [&_h2]:py-1 [&_h2]:bg-accent-green [&_h2]:brutal-border
        [&_h3]:text-xl [&_h3]:font-bold [&_h3]:mt-8 [&_h3]:mb-3 [&_h3]:uppercase [&_h3]:tracking-tight
        [&_p]:mb-5 [&_p]:leading-7 [&_p]:text-on-primary
        [&_ul]:mb-5 [&_ul]:ml-6 [&_ol]:mb-5 [&_ol]:ml-6
        [&_li]:mb-2 [&_li]:font-medium
        [&_a]:text-on-primary [&_a]:font-bold [&_a]:underline [&_a]:decoration-4 [&_a]:underline-offset-2 [&_a]:decoration-accent-magenta [&_a]:hover:bg-accent-magenta [&_a]:hover:no-underline [&_a]:px-1 [&_a]:transition-colors
        [&_strong]:font-black
        [&_pre]:p-5 [&_pre]:brutal-border [&_pre]:brutal-shadow-sm [&_pre]:overflow-x-auto [&_pre]:my-6
        [&_pre_code]:p-0"
    >
      <Content />
    </div>
  </article>

  <div class="mt-12 pt-8">
    <a
      href="/"
      class="inline-block px-6 py-3 bg-accent-orange text-on-primary font-black uppercase tracking-wider brutal-border brutal-shadow brutal-hover"
    >
      ‚Üê Back to all posts
    </a>
  </div>
</Layout>
